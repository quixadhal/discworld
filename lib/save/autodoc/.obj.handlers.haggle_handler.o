#/obj/handlers/autodoc/autodoc_file.c
public_functions (["sell_haggle":({({"int","*",}),({({"int",}),"value",({"int",}),"offer",({"int",}),"asking",({"int",}),"insults",({"string",}),"place",({"object",}),"keeper",({"object",}),"customer",}),(["main":({"This method does the actual haggle on a sell.The logic is as follows:<pre>if offer > asking then   give back a boggle responseelse if offer == asking then   sell the thing and give an accepted sayingelse if offer * insult_factor > asking * 100 then   adjustment = ( ( asking - offer ) * bargain_factor ) / 100   asking -= adjustment   return an adjustment messageelse   return an insulted messageendif</pre>The return from this function is an array of three elements, thefirst is the a flag saying if the item was accepted or not, thesecond is the current asking price and the last is the currentinsult level.<pre>({   flag (0/1), // This is 0 if unable to sell, 1 if sold   asking,     // the current asking price   insults,    // the current insult level})</pre>",}),"see":({"insult_factor()","bargain_factor()",}),"param":({"value the real value of the item","offer the offered value for the item","asking the current asking price","insults the current insult level","place the place for the money strings","keeper the shop keeper","customer the customer",}),"return":({"the array as described above",}),]),}),"bargain_factor":({({"int",}),({({"object",}),"keeper",({"object",}),"customer",}),(["main":({"This method determines the barganing factor between the customer andthe shop keeper.",}),"param":({"keeper the shop keeper","customer the customer of the shop",}),]),}),"insult_factor":({({"int",}),({({"object",}),"keeper",({"object",}),"customer",}),(["main":({"This method determines the insult factor between the customer and theshop keeper.",}),"param":({"keeper the shop keeper","customer the customer in the shop",}),]),}),])
protected_functions ([])
inherits ([])
main_docs (["main":({"This handler controls the npcs haggling the price of something with a player.  Currently it only handles sell barganing.<p>Factors of relevance:   <ol> <li> merchants' guild rating <li> race of customer vs. shopkeeper</ol>",}),])
define_docs ([])
includes (["/include/shops/bank.h":1522061544,"/include/money.h":1522061544,])
class_docs ([])
file_name "/obj/handlers/haggle_handler.c"
last_changed 1522061544
